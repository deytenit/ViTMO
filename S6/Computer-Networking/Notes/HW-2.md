# 2. DHCP-клиент

## IPv4

### Получение IPv4-адреса по DHCP

```bash
sudo apt install isc-dhcp-client
sudo dhclient tap0
```

Проверяем выданный IP-адрес и маску сети:

```bash
ip addr show tap0
```

### Получение доменного имени сети через DHCP

По разрешению доменов нужно обращаться к тому,
кто этим делом в системе занимается - в моем случае:

```bash
sudo resolvectl status tap0
```

> Где узнаем: `DNS Domain: hungry-device.com`.

## IPv6

### Получение SLAAC-адреса

При получении роутерных анонсов (`kernel_ra`) для автоконфигурации IPv6,
система самостоятельно назначает SLAAC-адреса. Проверим назначенные адреса:

```bash
ip -6 addr show tap0
```

#### Пинг адреса в сети с указанным суффиксом

Адрес находится в той же сети (`fdca:d8d3:b789:36ba:5089:d7ff:fed8:93e6/64`)
и заканчивается на `:8f:58ff:fee0:16f`, следовательно:

```bash
ping6 -I tap0 fdca:d8d3:b789:36ba:8f:58ff:fee0:16f
```

### Получение IPv6-адреса по DHCPv6

```bash
sudo dhclient -6 -v tap0
```

Проверяем выданный IP-адрес и маску сети:

```bash
ip -6 addr show tap0
```

#### Объяснение причины проверки SLAAC

> При использовании DHCP адресация фиксируется через обмен сообщениями между клиентом и сервером.
В случае SLAAC адресация происходит на основе анонсов,
что не подразумевает явное подтверждения от клиента.
Поэтому для проверки нужно произвести пинг.

### Определение DNS-сервера через DHCPv6

Аналогично с DHCP(v4)

```bash
resolvectl status tap0
```

> Где узнаем: `Current DNS Server: fdcd:8167:539f:827f:5990:60e6:f743:a871`.

### Разрешение имени сайта

#### Определение IP-адреса сайта

Самое простое будет использовать утилиту `dig`:

```bash
dig fyv9gvigpgvq73k71kpvvd82.localnetwork AAAA # AAAA - это DNS записи IPv6
```

> Ответ в секции `ANSWER`.

#### Проверка доступности сайта

Открываем веб-браузер, переходим по заданному адресу, жмем кнопку.
